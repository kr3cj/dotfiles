[[ $- = *i* ]] || return
${IS_OSX} || return

# remote host for container tools (https://docs.docker.com/engine/security/https/)
export DOCKER_REGISTRY="${CUSTOM_WORK_DOCKER_REGISTRY_ID}.dkr.ecr.us-east-1.amazonaws.com"

function docker-login () {
  docker run --rm \
    -e AWS_ACCESS_KEY_ID \
    -e AWS_SECRET_ACCESS_KEY \
    -e AWS_DEFAULT_REGION \
    -e AWS_REGION \
    mesosphere/aws-cli ecr get-login --registry-ids ${CUSTOM_WORK_DOCKER_REGISTRY_ID} --region \
      us-east-1 --no-include-email
}

function docker-reset () {
  docker-compose down --remove-orphans
  sudo docker stop $(sudo docker ps -a -q) || echo
  sudo docker rm $(sudo docker ps -a -q) || echo
  sudo docker rmi $(sudo docker images -q) || echo

  ${IS_LINUX} && sudo systemctl restart docker.service
  ${IS_OSX} && (killall Docker && open /Applications/Docker.app && sleep 30)

  sudo docker ps -a
}
